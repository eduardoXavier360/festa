<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lista de Confirmações</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background: #fbe8a6;
    margin: 0; padding: 2rem;
  }
  h1 {
    color: #d44d32;
    text-align: center;
  }
  table {
    width: 100%;
    max-width: 800px;
    margin: 1rem auto;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 12px rgba(0,0,0,0.15);
  }
  th, td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  th {
    background: #d44d32;
    color: white;
  }
  tr:hover {
    background: #f9e5da;
  }
  @media(max-width: 600px) {
    th, td {
      padding: 0.5rem;
    }
  }
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

</head>
<body>

<h1>Lista de Confirmações</h1>

<table id="tabelaConfirmacoes">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Quantidade</th>
      <th>Vai levar criança?</th>
      <th>Data/Hora</th>
    </tr>
  </thead>
  <tbody>
    <tr><td colspan="4" style="text-align:center;">Carregando...</td></tr>
  </tbody>
</table>

<script>
  // Configuração do Firebase - substitua pelos seus dados do Firebase
  const firebaseConfig = {
   apiKey: "AIzaSyDWCGUb-_dVE54G3VZwbqO-b_Lo2-gEc-A",
  authDomain: "convite2025-3f808.firebaseapp.com",
  projectId: "convite2025-3f808",
  storageBucket: "convite2025-3f808.firebasestorage.app",
  messagingSenderId: "697901634812",
  appId: "1:697901634812:web:401f1e4100af84b5f93379",
  measurementId: "G-YSB3FDQNC1"
  };

  // Inicializar Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const tabela = document.getElementById('tabelaConfirmacoes').querySelector('tbody');

  async function carregarConfirmacoes() {
    tabela.innerHTML = '<tr><td colspan="4" style="text-align:center;">Carregando...</td></tr>';

    try {
      const snapshot = await db.collection('confirmacoes')
        .orderBy('timestamp', 'desc')
        .get();

      if (snapshot.empty) {
        tabela.innerHTML = '<tr><td colspan="4" style="text-align:center;">Nenhuma confirmação ainda.</td></tr>';
        return;
      }

      tabela.innerHTML = ''; // limpa

      snapshot.forEach(doc => {
        const data = doc.data();
        const dataHora = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleString('pt-BR') : '-';

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${data.nome}</td>
          <td>${data.quantidade}</td>
          <td>${data.crianca}</td>
          <td>${dataHora}</td>
        `;
        tabela.appendChild(tr);
      });
    } catch (error) {
      tabela.innerHTML = '<tr><td colspan="4" style="text-align:center; color:red;">Erro ao carregar confirmações.</td></tr>';
      console.error(error);
    }
  }

  carregarConfirmacoes();
</script>

</body>
</html>
